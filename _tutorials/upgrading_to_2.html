---
layout: tutorial
redirect_from: "/edge/upgrading_to_2.html"
file_name: upgrading_to_2
order: 
---
<table cellspacing="0" cellpadding="0">
  <tbody>
  <tr id="section-1">
    <td class="docs">
      <div class="pilwrap">
        <a class="pilcrow" href="#section-1">&#182;</a>
      </div>
      <p>A number of things have changed with the release of jasmine 2.0</p>
    </td>
    <td class="code">
      <div class="highlight">
        <pre><!DOCTYPE html>
<html lang=en>
  <meta charset=utf-8>
  <meta name=viewport content="initial-scale=1, minimum-scale=1, width=device-width">
  <title>Error 404 (Page not found)!!1</title>
  <style>
    *{margin:0;padding:0}html,code{font:15px/22px arial,sans-serif}html{background:#fff;color:#222;padding:15px}body{margin:7% auto 0;max-width:390px;min-height:180px;padding:30px 0 15px}* > body{background:url(//www.google.com/images/errors/robot.png) 100% 5px no-repeat;padding-right:205px}p{margin:11px 0 22px;overflow:hidden}ins{color:#777;text-decoration:none}a img{border:0}@media screen and (max-width:772px){body{background:none;margin-top:0;max-width:none;padding-right:0}}#logo{background:url(//www.google.com/images/branding/googlelogo/1x/googlelogo_color_150x54dp.png) no-repeat;margin-left:-5px}@media only screen and (min-resolution:192dpi){#logo{background:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) no-repeat 0% 0%/100% 100%;-moz-border-image:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) 0}}@media only screen and (-webkit-min-device-pixel-ratio:2){#logo{background:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) no-repeat;-webkit-background-size:100% 100%}}#logo{display:inline-block;height:54px;width:150px}
  </style>
  <a href=//www.google.com/><span id=logo aria-label=Google></span></a>
  <p><b>404.</b> <ins>That’s an error.</ins>
  <p>The requested URL was not found on this server.  <ins>That’s all we know.</ins>
</pre>
      </div>
    </td>
  </tr>
  <tr id="section-Custom_Matchers">
    <td class="docs">
      <div class="pilwrap">
        <a class="pilcrow" href="#section-Custom_Matchers">&#182;</a>
      </div>
      <h2>Custom Matchers</h2>
    </td>
    <td class="code">
      <div class="highlight">
        <pre></pre>
      </div>
    </td>
  </tr>
  <tr id="section-3">
    <td class="docs">
      <div class="pilwrap">
        <a class="pilcrow" href="#section-3">&#182;</a>
      </div>
      <p>The <code>addMatchers</code> function is no longer on the spec (<code>this</code>) it is now on the global <code>jasmine</code> object.</p>
    </td>
    <td class="code">
      <div class="highlight">
        <pre></pre>
      </div>
    </td>
  </tr>
  <tr id="section-4">
    <td class="docs">
      <div class="pilwrap">
        <a class="pilcrow" href="#section-4">&#182;</a>
      </div>
      <p>A matcher is set up a bit different now.
The factory receives a <code>util</code> object which contains things like jasmines equality functions, and any registered <code>customEqualityTesters</code>.
The factory is expected to return an object with a <code>compare</code> function which will be called with the <code>actual</code> and <code>expected</code> directly,
instead of the actual value being on <code>this</code></p>
    </td>
    <td class="code">
      <div class="highlight">
        <pre></pre>
      </div>
    </td>
  </tr>
  <tr id="section-5">
    <td class="docs">
      <div class="pilwrap">
        <a class="pilcrow" href="#section-5">&#182;</a>
      </div>
      <p>The comparison should now return an object with <code>pass</code> and <code>message</code> attributes.</p>

<p>For more information on the <a href="custom_matcher.html">use of custom matchers</a>.
This page is intended to show the changes necessary to upgrade a 1.x suite to 2.0</p>
    </td>
    <td class="code">
      <div class="highlight">
        <pre></pre>
      </div>
    </td>
  </tr>
  <tr id="section-6">
    <td class="docs">
      <div class="pilwrap">
        <a class="pilcrow" href="#section-6">&#182;</a>
      </div>
      <p>Use of custom matchers remains the same</p>
    </td>
    <td class="code">
      <div class="highlight">
        <pre></pre>
      </div>
    </td>
  </tr>
  <tr id="section-Asynchronous_Specs">
    <td class="docs">
      <div class="pilwrap">
        <a class="pilcrow" href="#section-Asynchronous_Specs">&#182;</a>
      </div>
      <h2>Asynchronous Specs</h2>
    </td>
    <td class="code">
      <div class="highlight">
        <pre></pre>
      </div>
    </td>
  </tr>
  <tr id="section-8">
    <td class="docs">
      <div class="pilwrap">
        <a class="pilcrow" href="#section-8">&#182;</a>
      </div>
      <p>We&#39;ll pretend this is asynchronous for our tests below</p>
    </td>
    <td class="code">
      <div class="highlight">
        <pre></pre>
      </div>
    </td>
  </tr>
  <tr id="section-9">
    <td class="docs">
      <div class="pilwrap">
        <a class="pilcrow" href="#section-9">&#182;</a>
      </div>
      <p>The <code>runs</code>, <code>waits</code>, and <code>waitsFor</code> methods have been removed in favor of allowing functions
run as part of the spec to receive and invoke a <code>done</code> callback.</p>
    </td>
    <td class="code">
      <div class="highlight">
        <pre></pre>
      </div>
    </td>
  </tr>
  <tr id="section-10">
    <td class="docs">
      <div class="pilwrap">
        <a class="pilcrow" href="#section-10">&#182;</a>
      </div>
      <p>While it used to be necessary to keep track of the async state in the spec itself.</p>
    </td>
    <td class="code">
      <div class="highlight">
        <pre></pre>
      </div>
    </td>
  </tr>
  <tr id="section-11">
    <td class="docs">
      <div class="pilwrap">
        <a class="pilcrow" href="#section-11">&#182;</a>
      </div>
      <p>By having a <code>beforeEach</code>, <code>afterEach</code>, or <code>it</code> receive a <code>done</code> callback, jasmine will wait until that function is invoked
before moving to the next thing in the queue. This means if the asynchronous logic also takes a callback for when it is done,
jasmines <code>done</code> can just be passed through and jasmine will wait appropriately.</p>
    </td>
    <td class="code">
      <div class="highlight">
        <pre></pre>
      </div>
    </td>
  </tr>
  <tr id="section-Spies">
    <td class="docs">
      <div class="pilwrap">
        <a class="pilcrow" href="#section-Spies">&#182;</a>
      </div>
      <h2>Spies</h2>
    </td>
    <td class="code">
      <div class="highlight">
        <pre></pre>
      </div>
    </td>
  </tr>
  <tr id="section-13">
    <td class="docs">
      <div class="pilwrap">
        <a class="pilcrow" href="#section-13">&#182;</a>
      </div>
      <p>All the ways to tell the spy how to behave are no longer their own attribute directly on the spy.
There is a single <code>and</code> attribute that has all of the spy behaviors on it so fewer attributes are added to the function being spied upon.</p>
    </td>
    <td class="code">
      <div class="highlight">
        <pre></pre>
      </div>
    </td>
  </tr>
  <tr id="section-14">
    <td class="docs">
      <div class="pilwrap">
        <a class="pilcrow" href="#section-14">&#182;</a>
      </div>
      <p>Basic setup and check remains the same</p>
    </td>
    <td class="code">
      <div class="highlight">
        <pre></pre>
      </div>
    </td>
  </tr>
  <tr id="section-15">
    <td class="docs">
      <div class="pilwrap">
        <a class="pilcrow" href="#section-15">&#182;</a>
      </div>
      <p>Similarly to behaviors, more advanced call checks are on the <code>calls</code> attribute</p>
    </td>
    <td class="code">
      <div class="highlight">
        <pre></pre>
      </div>
    </td>
  </tr>
  <tr id="section-Clock">
    <td class="docs">
      <div class="pilwrap">
        <a class="pilcrow" href="#section-Clock">&#182;</a>
      </div>
      <h2>Clock</h2>
    </td>
    <td class="code">
      <div class="highlight">
        <pre></pre>
      </div>
    </td>
  </tr>
  <tr id="section-17">
    <td class="docs">
      <div class="pilwrap">
        <a class="pilcrow" href="#section-17">&#182;</a>
      </div>
      <p>The jasmine mock clock is now an instanciated object and not a global,
and it is now <code>install</code>ed instead of being told to <code>useMock</code>.</p>
    </td>
    <td class="code">
      <div class="highlight">
        <pre></pre>
      </div>
    </td>
  </tr>
  <tr id="section-18">
    <td class="docs">
      <div class="pilwrap">
        <a class="pilcrow" href="#section-18">&#182;</a>
      </div>
      <p><code>tick</code>ing the clock remains basically the same</p>
    </td>
    <td class="code">
      <div class="highlight">
        <pre></pre>
      </div>
    </td>
  </tr>
  <tr id="section-19">
    <td class="docs">
      <div class="pilwrap">
        <a class="pilcrow" href="#section-19">&#182;</a>
      </div>
      <p>Jasmine 2.0 removes the ability for addons to dynamically add <code>afterEach</code> callbacks.
In order to keep the clock from being a special object that is able to uninstall itself, it now needs to be manually uninstalled.</p>

    </td>
    <td class="code">
      <div class="highlight">
        <pre></pre>
      </div>
    </td>
  </tr>
  </tbody>
</table>
